<!DOCTYPE html>
<html lang="ca">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CREACTIVIA — Disseny d'Activitats amb IA</title>
    
    <link rel="stylesheet" href="style.css">
    
    <!-- Icones -->
    <script src="https://unpkg.com/lucide@latest"></script>

    <!-- 1. CONNEXIÓ SUPABASE (L'únic que afegim al head) -->
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
</head>
<body>

    <div class="app-container">
        <!-- Sidebar -->
        <aside class="sidebar">
            <div class="sidebar-header">
                <h1 class="logo">CREACTIVIA</h1>
                <p class="tagline">IA PER A DOCENTS</p>
            </div>

            <!-- Aquí és on hi havia el problema de disseny -->
            <div class="sidebar-settings">
                <div class="sidebar-section">
                    <label id="sidebar-api-label" class="section-label">
                        <i data-lucide="key"></i> Google Key
                    </label>
                    <div class="api-input-group">
                        <input type="password" id="sidebar-api-key" placeholder="AIzaSy...">
                        <button id="sidebar-api-save" class="icon-btn" title="Desar Clau"><i data-lucide="save"></i></button>
                        <button id="sidebar-api-test" class="icon-btn" title="Provar Connexió"><i data-lucide="zap"></i></button>
                    </div>
                    <small id="sidebar-api-help" class="help-text"></small>
                </div>

                <div class="sidebar-section">
                    <label class="section-label"><i data-lucide="cpu"></i> Proveïdor</label>
                    <select id="sidebar-provider" class="sidebar-select">
                        <option value="gemini">Google Gemini</option>
                        <option value="openrouter">OpenRouter</option>
                    </select>
                </div>

                <div class="sidebar-section">
                    <label class="section-label"><i data-lucide="layers"></i> Model</label>
                    <select id="sidebar-model" class="sidebar-select"></select>
                </div>
            </div>

            <nav class="main-nav">
                <button class="nav-item active" data-mode="generate">
                    <i data-lucide="sparkles"></i> Generar
                </button>
                <button class="nav-item" data-mode="audit">
                    <i data-lucide="shield-check"></i> Auditar
                </button>
                <button class="nav-item" data-mode="history">
                    <i data-lucide="history"></i> Historial
                </button>
            </nav>
        </aside>

        <!-- Main Content -->
        <main class="main-content">
            <section id="generate-section" class="section active">
                <div id="wizard-container"></div>
            </section>

            <section id="audit-section" class="section">
                <div id="auditor-container"></div>
            </section>

            <section id="history-section" class="section">
                <div id="history-container"></div>
            </section>

            <section id="result-section" class="section hidden">
                <div id="result-container"></div>
            </section>
        </main>

        <!-- Loading Overlay -->
        <div id="loading-overlay" class="loading-overlay hidden">
            <div class="loading-content">
                <div class="spinner"></div>
                <p class="loading-text">Generant proposta pedagògica...</p>
                <p class="loading-sub">Consultant marcs teòrics i dissenyant l'activitat</p>
            </div>
        </div>
    </div>

    <!-- 2. EL TEU SCRIPT (Al final de tot) -->
    <script type="module" src="./src/main.js"></script>

</body>
</html>
